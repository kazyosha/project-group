<!DOCTYPE html>
<html lang="vi" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{/layout}">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ch·ªânh s·ª≠a ng∆∞·ªùi d√πng</title>
</head>

<body>
<div layout:fragment="content" class="container py-5">

  <div class="card shadow-lg p-4 mx-auto" style="max-width: 750px;">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="text-primary m-0">‚úèÔ∏è Ch·ªânh s·ª≠a ng∆∞·ªùi d√πng</h3>
      <a th:href="@{/admin/users/list}" class="btn btn-outline-secondary btn-sm">
        ‚¨Ö Quay l·∫°i danh s√°ch
      </a>
    </div>

    <form th:action="@{/admin/users/update/{id}(id=${user.id})}"
          th:object="${user}" method="post" enctype="multipart/form-data">

      <!-- Hidden ID -->
      <input type="hidden" th:field="*{id}"/>

      <!-- H·ªç & T√™n -->
      <div class="mb-3">
        <label for="name" class="form-label fw-bold">H·ªç & T√™n</label>
        <input type="text" th:field="*{name}" class="form-control" id="name" placeholder="Nh·∫≠p h·ªç v√† t√™n" required>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <label for="email" class="form-label fw-bold">Email</label>
        <input type="email" th:field="*{email}" class="form-control" id="email" placeholder="Nh·∫≠p email" required>
      </div>

      <!-- M·∫≠t kh·∫©u -->
      <div class="mb-3">
        <label for="password" class="form-label fw-bold">M·∫≠t kh·∫©u m·ªõi</label>
        <input type="password" th:field="*{password}" class="form-control" id="password" placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi">
        <div class="form-text">Nh·∫≠p n·∫øu mu·ªën ƒë·ªïi m·∫≠t kh·∫©u.</div>
      </div>

      <!-- Vai tr√≤ -->
      <div class="mb-3">
        <label for="role" class="form-label fw-bold">Vai tr√≤</label>
        <select th:field="*{role}" class="form-select" id="role" required>
          <option th:value="ADMIN" th:selected="${user.role == 'ADMIN'}">Admin</option>
          <option th:value="LIBRARIAN" th:selected="${user.role == 'LIBRARIAN'}">Librarian</option>
          <option th:value="USER" th:selected="${user.role == 'USER'}">User</option>
        </select>
      </div>

      <!-- ·∫¢nh ƒë·∫°i di·ªán -->
      <div class="mb-4">
        <label for="imageUrlFile" class="form-label fw-bold">·∫¢nh ƒë·∫°i di·ªán</label>
        <input type="file" th:field="*{imageUrlFile}" class="form-control" id="imageUrlFile">

        <div th:if="${user.imageUrl != null}" class="mt-3">
          <p class="mb-1">·∫¢nh hi·ªán t·∫°i:</p>
          <img th:src="${user.imageUrl}" alt="Avatar" class="img-thumbnail rounded" style="max-width: 120px;">
        </div>
      </div>

      <!-- Action buttons -->
      <div class="d-flex justify-content-end">
        <button type="submit" class="btn btn-success me-2">üíæ C·∫≠p nh·∫≠t</button>
        <a th:href="@{/admin/users/list}" class="btn btn-secondary">‚ùå H·ªßy</a>
      </div>
    </form>
  </div>

</div>
</body>
</html>
