<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout}">
<head>
  <meta charset="UTF-8">
  <title>Ch·ªânh s·ª≠a ng∆∞·ªùi d√πng</title>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<section layout:fragment="content" id="page-content">
  <div class="row justify-content-center">
    <div class="col-lg-6 col-md-8">
      <div class="card shadow-lg rounded-3">
        <div class="card-header bg-warning text-white text-center">
          <h4 class="mb-0">‚úèÔ∏è Ch·ªânh s·ª≠a ng∆∞·ªùi d√πng</h4>
        </div>
        <div class="card-body">
          <form th:action="@{/admin/users/update/{id}(id=${user.id})}"
                th:object="${user}" method="post"
                enctype="multipart/form-data">

            <input type="hidden" th:field="*{id}"/>

            <!-- H·ªç & T√™n -->
            <div class="mb-3">
              <label class="form-label fw-bold">üë§ H·ªç & T√™n</label>
              <input type="text" th:field="*{name}"
                     th:classappend="${#fields.hasErrors('name')}? 'is-invalid' : ''"
                     class="form-control" placeholder="Nh·∫≠p t√™n ƒë·∫ßy ƒë·ªß" required/>
              <div class="invalid-feedback"
                   th:if="${#fields.hasErrors('name')}"
                   th:errors="*{name}"></div>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label class="form-label fw-bold">üìß Email</label>
              <input type="email" th:field="*{email}"
                     th:classappend="${#fields.hasErrors('email')}? 'is-invalid' : ''"
                     class="form-control" readonly/>
              <div class="invalid-feedback"
                   th:if="${#fields.hasErrors('email')}"
                   th:errors="*{email}"></div>
            </div>

            <!-- S·ªë ƒëi·ªán tho·∫°i -->
            <div class="mb-3">
              <label class="form-label fw-bold">üìû S·ªë ƒëi·ªán tho·∫°i</label>
              <input type="text" th:field="*{phone}"
                     th:classappend="${#fields.hasErrors('phone')}? 'is-invalid' : ''"
                     class="form-control" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"/>
              <div class="invalid-feedback"
                   th:if="${#fields.hasErrors('phone')}"
                   th:errors="*{phone}"></div>
            </div>

            <!-- M·∫≠t kh·∫©u -->
            <div class="mb-3">
              <label class="form-label fw-bold">üîë M·∫≠t kh·∫©u m·ªõi</label>
              <input type="password" th:field="*{password}"
                     th:classappend="${#fields.hasErrors('password')}? 'is-invalid' : ''"
                     class="form-control" placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi"/>
              <div class="invalid-feedback"
                   th:if="${#fields.hasErrors('password')}"
                   th:errors="*{password}"></div>
            </div>

            <!-- Vai tr√≤ -->
            <div class="mb-3">
              <label class="form-label fw-bold">‚ö° Vai tr√≤</label>
              <select th:field="*{role}"
                      th:classappend="${#fields.hasErrors('role')}? 'is-invalid' : ''"
                      class="form-select" required>
                <option value="" disabled>Ch·ªçn vai tr√≤</option>
                <option value="USER">USER</option>
                <option value="LIBRARIAN">LIBRARIAN</option>
                <option value="ADMIN">ADMIN</option>
              </select>
              <div class="invalid-feedback"
                   th:if="${#fields.hasErrors('role')}"
                   th:errors="*{role}"></div>
            </div>

            <!-- ·∫¢nh ƒë·∫°i di·ªán -->
            <div class="mb-4">
              <label for="imageUrlFile" class="form-label fw-bold">·∫¢nh ƒë·∫°i di·ªán</label>
              <input type="file" th:field="*{imageUrlFile}" class="form-control" id="imageUrlFile">

              <div th:if="${user.imageUrl != null}" class="mt-3">
                <p class="mb-1">·∫¢nh hi·ªán t·∫°i:</p>
                <img th:src="${user.imageUrl}" alt="Avatar" class="img-thumbnail rounded" style="max-width: 120px;">
              </div>
            </div>

            <!-- Buttons -->
            <div class="d-flex justify-content-between mt-4">
              <a th:href="@{/admin/users/list}" class="btn btn-outline-secondary">‚ùå H·ªßy</a>
              <button type="submit" class="btn btn-success">üíæ C·∫≠p nh·∫≠t</button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</section>
</body>
</html>
